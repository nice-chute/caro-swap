(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,n){"use strict";(function(e){var a=n(0),r=n.n(a),s=n(5),i=n(11),c=n(3),l=n.n(c),u=n(4),o=n(14),m=n(40),g=n(78),p=n(395),f=n(148),d=n(397),b=n(396),y=n(151),E=n(202),k=n(70),M=n(26),h=n(206),v=n(65),S=n(204),P=n(118),w=n(119),x=n(95),N=n(150),O=n(120),K=n(68),B=n.n(K);n(387);n(388);var A=E.a.metadata.Metadata,j=new u.PublicKey("33Tz73Cng8inaqTxGhv2HT2bZkip2axJJSEsa9B21ZR7"),I=[Object(p.a)()],L="https://ssc-dao.genesysgo.net/",_={preflightCommitment:"processed"},R=new u.PublicKey(g.metadata.address),T=m.e.SystemProgram;function V(){var t=Object(c.useState)([]),n=Object(i.a)(t,2),a=n[0],p=n[1],d=Object(c.useState)([]),b=Object(i.a)(d,2),E=b[0],h=b[1],K=Object(f.b)();function I(){return V.apply(this,arguments)}function V(){return(V=Object(s.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u.Connection(L,_.preflightCommitment),n=new m.c(t,K,_.preflightCommitment),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(c.useEffect)(function(){Object(s.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(K&&K.publicKey){e.next=2;break}return e.abrupt("return");case 2:D().catch(console.error),C().catch(console.error);case 4:case"end":return e.stop()}},e)}))()},[K]);var C=Object(c.useCallback)(Object(s.a)(r.a.mark(function e(){var t,n,a,s,i,c,l,m,g,f,d,b,y;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return t=e.sent,e.next=5,t.connection.getParsedTokenAccountsByOwner(t.wallet.publicKey,{programId:o.TOKEN_PROGRAM_ID});case 5:n=e.sent,a=[],s=0;case 8:if(!(s<n.value.length)){e.next=38;break}return i=n.value[s].pubkey,c=new u.PublicKey(n.value[s].account.data.parsed.info.mint),e.next=13,t.connection.getParsedAccountInfo(c);case 13:if(l=e.sent,m=parseInt(n.value[s].account.data.parsed.info.tokenAmount.amount),1!==parseInt(l.value.data.parsed.info.supply)||1!==m){e.next=35;break}return e.prev=17,e.next=20,A.getPDA(c);case 20:return g=e.sent,e.next=23,A.load(t.connection,g);case 23:return f=e.sent,d=f.data.data.uri,e.next=27,B.a.get(d);case 27:b=e.sent,y=b.data,a.push({pubkey:i,mint:c,data:y}),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(17),console.log(e.t0);case 35:s++,e.next=8;break;case 38:p(a);case 39:case"end":return e.stop()}},e,null,[[17,32]])}))),D=Object(c.useCallback)(Object(s.a)(r.a.mark(function e(){var t,n,a,s,i,c,l,u,o,p,f,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:return t=e.sent,n=new m.b(g,R,t),a=[],s=[],e.next=8,t.connection.getProgramAccounts(n.programId);case 8:i=e.sent,c=0;case 10:if(!(c<i.length)){e.next=41;break}return e.prev=11,e.next=14,n.account.listing.fetch(i[c].pubkey);case 14:return l=e.sent,e.prev=15,e.next=18,A.getPDA(l.nftMint);case 18:return u=e.sent,e.next=21,A.load(t.connection,u);case 21:return o=e.sent,p=o.data.data.uri,e.next=25,B.a.get(p);case 25:f=e.sent,d=f.data,a.push({listing:l,metadata:d}),l.seller.equals(t.wallet.publicKey)&&s.push({listing:l,metadata:d}),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(15),console.log(e.t0);case 34:e.next=38;break;case 36:e.prev=36,e.t1=e.catch(11);case 38:c++,e.next=10;break;case 41:h({activeListings:a,userListings:s});case 42:case"end":return e.stop()}},e,null,[[11,36],[15,31]])})));function J(t){var n=t.props,a=Object(c.useState)(""),p=Object(i.a)(a,2),f=p[0],d=p[1];function b(){return(b=Object(s.a)(r.a.mark(function t(){var a,s,c,l,p,d,b,y,E,k,M,h,v,S;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new m.a(f*u.LAMPORTS_PER_SOL),t.next=4,I();case 4:return s=t.sent,c=new m.b(g,R,s),l=n.pubkey,p=n.mint,t.next=10,u.PublicKey.findProgramAddress([e.from(m.d.bytes.utf8.encode("listing")),j.toBuffer(),p.toBuffer(),s.wallet.publicKey.toBuffer()],c.programId);case 10:return d=t.sent,b=Object(i.a)(d,2),y=b[0],E=b[1],t.next=16,u.PublicKey.findProgramAddress([e.from(m.d.bytes.utf8.encode("vault")),p.toBuffer()],c.programId);case 16:return k=t.sent,M=Object(i.a)(k,2),h=M[0],v=M[1],t.next=22,c.rpc.createListing(a,E,v,{accounts:{signer:s.wallet.publicKey,listing:y,market:j,nftVault:h,nftAccount:l,nftMint:p,systemProgram:T.programId,tokenProgram:o.TOKEN_PROGRAM_ID,rent:u.SYSVAR_RENT_PUBKEY},signers:[]});case 22:S=t.sent,console.log(S),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),console.log(t.t0);case 29:case"end":return t.stop()}},t,null,[[0,26]])}))).apply(this,arguments)}return 0===Object.keys(n).length&&n.constructor===Object?l.a.createElement(x.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"visually-hidden"},"Loading...")):l.a.createElement(v.a,{className:"card"},l.a.createElement(k.a,null,l.a.createElement(v.a.Img,{className:"nft",src:n.data.image})),l.a.createElement(v.a.Body,{className:"card-body justify-content-center"},l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("input",{type:"text",className:"form-control",min:"0",placeholder:"SOL",value:f,onChange:function(e){d(e.target.value)}}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(e){return function(){return b.apply(this,arguments)}()}},"List")))))}function F(t){var n=t.props;function a(){return(a=Object(s.a)(r.a.mark(function t(){var a,s,c,l,p,f,d,b,y,E,k,M,h,v,S,P,w,x;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I();case 3:return a=t.sent,s=new m.b(g,R,a),c=new u.PublicKey(n.nftMint),l=new u.PublicKey(n.market),p=u.Keypair.generate(),t.next=10,u.PublicKey.findProgramAddress([e.from(m.d.bytes.utf8.encode("listing")),l.toBuffer(),n.nftMint.toBuffer(),n.seller.toBuffer()],s.programId);case 10:return f=t.sent,d=Object(i.a)(f,2),b=d[0],y=d[1],t.next=16,u.PublicKey.findProgramAddress([e.from(m.d.bytes.utf8.encode("vault")),l.toBuffer(),o.NATIVE_MINT.toBuffer()],s.programId);case 16:return E=t.sent,k=Object(i.a)(E,2),M=k[0],h=k[1],t.next=22,u.PublicKey.findProgramAddress([e.from(m.d.bytes.utf8.encode("vault")),c.toBuffer()],s.programId);case 22:return v=t.sent,S=Object(i.a)(v,2),P=S[0],w=S[1],t.next=28,s.rpc.buy(y,h,w,{accounts:{signer:a.wallet.publicKey,signerNftAcc:p.publicKey,listing:b,seller:n.seller,market:l,marketVault:M,nftVault:P,nftMint:c,nativeMint:o.NATIVE_MINT,systemProgram:T.programId,tokenProgram:o.TOKEN_PROGRAM_ID,rent:u.SYSVAR_RENT_PUBKEY},signers:[p]});case 28:x=t.sent,console.log(x),t.next=35;break;case 32:t.prev=32,t.t0=t.catch(0),console.log(t.t0);case 35:case"end":return t.stop()}},t,null,[[0,32]])}))).apply(this,arguments)}return l.a.createElement(v.a,{className:"card"},l.a.createElement("div",{className:"nft-price inline"},l.a.createElement("img",{alt:"",src:"../sol.svg",width:"15",height:"15",className:"d-inline-block"})," ",n.listing.ask.toNumber()/u.LAMPORTS_PER_SOL),l.a.createElement(k.a,null,l.a.createElement(v.a.Img,{className:"nft",src:n.metadata.image})),l.a.createElement(v.a.Body,{className:"card-body justify-content-center"},l.a.createElement(S.a,{className:"submit-btn",onClick:function(){return function(){return a.apply(this,arguments)}()}},"Buy")))}function G(t){var n=t.props,a=Object(c.useState)(""),p=Object(i.a)(a,2),f=p[0],d=p[1];function b(){return(b=Object(s.a)(r.a.mark(function t(){var a,s,c,l,p,f,d,b,y,E,k,M,h,v;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I();case 3:return a=t.sent,s=new m.b(g,R,a),c=u.Keypair.generate(),l=new u.PublicKey(n.listing.nftMint),p=new u.PublicKey(n.listing.market),t.next=10,u.PublicKey.findProgramAddress([e.from(m.d.bytes.utf8.encode("listing")),p.toBuffer(),l.toBuffer(),a.wallet.publicKey.toBuffer()],s.programId);case 10:return f=t.sent,d=Object(i.a)(f,2),b=d[0],y=d[1],t.next=16,u.PublicKey.findProgramAddress([e.from(m.d.bytes.utf8.encode("vault")),l.toBuffer()],s.programId);case 16:return E=t.sent,k=Object(i.a)(E,2),M=k[0],h=k[1],t.next=22,s.rpc.closeListing(y,h,{accounts:{signer:a.wallet.publicKey,signerNftAcc:c.publicKey,nftVault:M,listing:b,market:p,nftMint:l,systemProgram:T.programId,tokenProgram:o.TOKEN_PROGRAM_ID,rent:u.SYSVAR_RENT_PUBKEY},signers:[c]});case 22:v=t.sent,console.log(v),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),console.log(t.t0);case 29:case"end":return t.stop()}},t,null,[[0,26]])}))).apply(this,arguments)}function y(){return(y=Object(s.a)(r.a.mark(function t(){var a,s,c,l,p,d,b,y,E,k;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new m.a(f*u.LAMPORTS_PER_SOL),t.next=4,I();case 4:return s=t.sent,c=new m.b(g,R,s),l=new u.PublicKey(n.listing.nftMint),p=new u.PublicKey(n.listing.market),t.next=10,u.PublicKey.findProgramAddress([e.from(m.d.bytes.utf8.encode("listing")),p.toBuffer(),l.toBuffer(),s.wallet.publicKey.toBuffer()],c.programId);case 10:return d=t.sent,b=Object(i.a)(d,2),y=b[0],E=b[1],t.next=16,c.rpc.ask(a,E,{accounts:{signer:s.wallet.publicKey,listing:y,market:p,nftMint:l,systemProgram:T.programId,tokenProgram:o.TOKEN_PROGRAM_ID},signers:[]});case 16:k=t.sent,console.log(k),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),console.log(t.t0);case 23:case"end":return t.stop()}},t,null,[[0,20]])}))).apply(this,arguments)}return l.a.createElement(v.a,{className:"card"},l.a.createElement("div",{className:"nft-price inline"},l.a.createElement("img",{alt:"",src:"../sol.svg",width:"15",height:"15",className:"d-inline-block"})," ",n.listing.ask.toNumber()/u.LAMPORTS_PER_SOL),l.a.createElement(k.a,null,l.a.createElement(v.a.Img,{className:"nft",src:n.metadata.image})),l.a.createElement(v.a.Body,{className:"card-body justify-content-center"},l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("input",{type:"text",className:"form-control",min:"0",placeholder:"SOL",value:f,onChange:function(e){d(e.target.value)}}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(e){return function(){return y.apply(this,arguments)}()}},"Update"))),l.a.createElement("button",{className:"close-btn",type:"button",onClick:function(e){return function(){return b.apply(this,arguments)}()}},"Close listing")))}function Y(e){var t=e.props;return 0===t.length?l.a.createElement(x.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"visually-hidden"},"Loading...")):l.a.createElement(k.a,{className:"card-container"},l.a.createElement(P.a,{xs:"auto",md:"auto",className:"row"},t.activeListings.map(function(e,t){return l.a.createElement(w.a,{className:"col top-buffer",key:t},l.a.createElement(F,{props:e}))})))}function q(e){var t=e.props;return 0===t.length?l.a.createElement(x.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"visually-hidden"},"Loading...")):l.a.createElement(k.a,{className:"card-container"},l.a.createElement(P.a,{xs:"auto",md:"auto",className:"row"},t.userListings.map(function(e,t){return l.a.createElement(w.a,{className:"col top-buffer",key:t},l.a.createElement(G,{props:e}))})))}function H(e){var t=e.props;return 0===Object.keys(a).length?l.a.createElement(x.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"visually-hidden"},"Loading...")):l.a.createElement(k.a,{className:"card-container"},l.a.createElement(P.a,{xs:"auto",md:"auto",className:"row"},t.map(function(e,t){return l.a.createElement(w.a,{className:"col top-buffer",key:t},l.a.createElement(J,{props:e}))})))}function U(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Y,{props:E}))}function W(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(q,{props:E}))}function Z(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(H,{props:a}))}return K.connected?l.a.createElement(k.a,{className:"container-top"},l.a.createElement(N.a,{sticky:"top"},l.a.createElement(k.a,{className:"nav-container"},l.a.createElement(N.a.Brand,{href:"/"},l.a.createElement("img",{alt:"",src:"../small.png",height:"75",className:"logo d-inline-block align-middle"})," ",l.a.createElement("img",{alt:"",src:"../logo.png",width:"190",height:"25",className:"logo-banner d-inline-block align-middle"})," "),l.a.createElement(O.a,{className:"nav-middle"},l.a.createElement(O.a.Link,{href:"/listings"},"My Listings"),l.a.createElement(O.a.Link,{href:"/wallet"},"Wallet")),l.a.createElement("a",{href:"https://discord.gg/NJ8cvqPQ"},l.a.createElement("img",{alt:"",src:"../discord1.svg",width:"35",height:"35",className:"logo-banner d-inline-block align-middle",href:"https://discord.gg/NJ8cvqPQ"})," "))),l.a.createElement(M.c,null,l.a.createElement(M.a,{path:"/",element:l.a.createElement(U,null)}),l.a.createElement(M.a,{path:"/wallet",element:l.a.createElement(Z,null)}),l.a.createElement(M.a,{path:"/listings",element:l.a.createElement(W,null)}))):l.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"}},l.a.createElement(y.b,null))}t.a=function(){return l.a.createElement(d.a,{endpoint:L},l.a.createElement(b.a,{wallets:I,autoConnect:!0},l.a.createElement(y.a,null,l.a.createElement(h.a,null,l.a.createElement(V,null)))))}}).call(this,n(6).Buffer)},207:function(e,t,n){e.exports=n(208)},208:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),s=n(55),i=n.n(s),c=(n(213),n(197));n(394);i.a.render(r.a.createElement(c.a,null),document.getElementById("root"))},213:function(e,t,n){},219:function(e,t){},220:function(e,t){},243:function(e,t){},244:function(e,t){},262:function(e,t){},263:function(e,t){},280:function(e,t){},281:function(e,t){},387:function(e,t,n){},78:function(e){e.exports={version:"0.1.0",name:"fortune",instructions:[{name:"createMarket",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"market",isMut:!0,isSigner:!0},{name:"marketVault",isMut:!0,isSigner:!1},{name:"nativeMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"listingFee",type:"u64"},{name:"marketVaultBump",type:"u8"}]},{name:"createListing",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"listing",isMut:!0,isSigner:!1},{name:"market",isMut:!0,isSigner:!1},{name:"nftVault",isMut:!0,isSigner:!1},{name:"nftAccount",isMut:!0,isSigner:!1},{name:"nftMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"ask",type:"u64"},{name:"listingBump",type:"u8"},{name:"nftVaultBump",type:"u8"}]},{name:"buy",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"signerNftAcc",isMut:!0,isSigner:!0},{name:"listing",isMut:!0,isSigner:!1},{name:"seller",isMut:!0,isSigner:!1},{name:"market",isMut:!0,isSigner:!1},{name:"marketVault",isMut:!0,isSigner:!1},{name:"nftVault",isMut:!0,isSigner:!1},{name:"nftMint",isMut:!1,isSigner:!1},{name:"nativeMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"listingBump",type:"u8"},{name:"marketVaultBump",type:"u8"},{name:"nftVaultBump",type:"u8"}]},{name:"ask",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"listing",isMut:!0,isSigner:!1},{name:"market",isMut:!0,isSigner:!1},{name:"nftMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"},{name:"listingBump",type:"u8"}]},{name:"closeListing",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"signerNftAcc",isMut:!0,isSigner:!0},{name:"nftVault",isMut:!0,isSigner:!1},{name:"listing",isMut:!0,isSigner:!1},{name:"market",isMut:!0,isSigner:!1},{name:"nftMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"listingBump",type:"u8"},{name:"nftVaultBump",type:"u8"}]},{name:"withdrawFees",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"targetWsolAcc",isMut:!0,isSigner:!1},{name:"market",isMut:!0,isSigner:!1},{name:"marketVault",isMut:!0,isSigner:!1},{name:"nativeMint",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"},{name:"marketVaultBump",type:"u8"}]}],accounts:[{name:"Market",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"lamportVault",type:"publicKey"},{name:"listingFee",type:"u64"}]}},{name:"Listing",type:{kind:"struct",fields:[{name:"market",type:"publicKey"},{name:"seller",type:"publicKey"},{name:"nftMint",type:"publicKey"},{name:"ask",type:"u64"},{name:"lock",type:"bool"}]}}],errors:[{code:6e3,name:"BidTooLow",msg:"Bid is too low"},{code:6001,name:"InvalidAskAuth",msg:"Only seller can change ask"},{code:6002,name:"LockedListing",msg:"Locked listing"},{code:6003,name:"ZeroAsk",msg:"Ask cannot be less than zero"}],metadata:{address:"rTxHpHTgJ6ZeWgjAX9eEpS92Ei6SxD86rh1u55H6pWv"}}}},[[207,1,2]]]);
//# sourceMappingURL=main.bfea6dd8.chunk.js.map